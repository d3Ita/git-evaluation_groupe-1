#!/usr/bin/env python3
"""Minitrice - Calculatrice arithmétique élémentaire."""

import sys
import re

def parse_expression(expression):
    """Valide et parse une expression arithmétique avec regex."""
    expr = expression.strip()

    if not expr:
        raise SyntaxError("Expression vide")

    # Regex : nombre positif (opérateur) nombre positif
    pattern = r'^(\d+(\.\d+)?)\s*([+\-*/])\s*(\d+(\.\d+)?)$'
    match = re.match(pattern, expr)

    if not match:
        raise SyntaxError(expr)

    a = float(match.group(1))
    op = match.group(3)
    b = float(match.group(4))

    return a, op, b

def compute(expression):
    """Calcule le résultat d'une expression arithmétique."""
    expr = expression.strip()
    for i in range(1, len(expr)):
        if expr[i] in '+-*/':
            a = float(expr[:i])
            b = float(expr[i+1:])
            op = expr[i]

            if op == '+':   # addition
                return a + b
            elif op == '-': #soustraction
                return a - b
            elif op == '*': # multiplication
                return a * b
            elif op == '/': # division
                return a / b

    return None


def format_result(result):
    """Formate le résultat pour l'affichage."""
    if result == int(result):
        return str(int(result))
    return str(result)


def main():
    interactive = sys.stdin.isatty()     # ajout stdin

    try:
        while True:
            if interactive:
                print("> ", end="", flush=True)

            line = input()  # demande l'entre

            if not line.strip():
                continue

            result = compute(line)
            if result is not None:
                print(format_result(result))
    except EOFError:
        if interactive:
            print()
            print("Fin des calculs :)")

    sys.exit(0)


if __name__ == "__main__":
    main()
